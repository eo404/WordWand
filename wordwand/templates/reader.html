{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WordWand â€“ Read & Listen</title>

    <!-- Board + Scene CSS -->
    <link rel="stylesheet" href="{% static 'css/tts_engine.css' %}">

    <!-- Your Original Reader CSS -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>

<body>

    <!-- Bunting -->
    <img src="{% static 'images/banner.png' %}" class="bunting">

    <!-- Teacher -->
    <img src="{% static 'images/teacher.png' %}" class="teacher">

    <!-- CENTER AREA -->
    <main>

        <!-- CHALK BOARD -->
        <div class="main-board">

            <!-- YOUR ORIGINAL READER CONTENT (UNCHANGED) -->
            <div class="container">

                <h2>ğŸ“š WordWand â€“ Read & Listen ğŸ“š</h2>

                <div class="upload-section">
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="file" name="file" required>
                        <button type="submit">ğŸ“ Read File</button>
                    </form>
                </div>

                {% if error %}
                <div class="error-message">{{ error }}</div>
                {% endif %}

                {% if text %}
                <div class="text-display-section">
                    <h3>ğŸ“– Detected Text</h3>
                    <div id="text-container"></div>
                </div>

                <div class="control-panel">
                    <button onclick="readNormal()">â–¶ Read</button>
                    <button onclick="readSlow()">ğŸ¢ Slow</button>
                    <button onclick="stopSpeech()">â¹ Stop</button>
                </div>
                {% endif %}

            </div>

        </div>

    </main>

    <!-- DATA TO JS -->
    <script>
        const OCR_TEXT = "{{ text|escapejs }}";
        const HARD_WORDS = JSON.parse('{{ hard_words|escapejs|default:"[]" }}');
        const SYLLABLES = JSON.parse('{{ syllables|escapejs|default:"{}" }}');
    </script>

    <!-- POPUP -->
    <div id="word-popup" class="popup hidden">
        <div class="popup-content" onclick="event.stopPropagation();">
            <span class="close-btn" onclick="closePopup()">âœ–</span>
            <h2 id="popup-word"></h2>
            <div id="letter-box"></div>
            <div style="margin-top: 20px;">
                <button onclick="speakPopupWord()">ğŸ”Š Hear Again</button>
                <button onclick="closePopup()">Close</button>
            </div>
        </div>
    </div>

    <script src="{% static 'js/tts_engine.js' %}"></script>

</body>
</html>